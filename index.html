<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bean Clicker Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="tab" data-tab="auto">Auto</div>
            <div class="tab" data-tab="click">Click</div>
            <div class="tab" data-tab="multiplier">Multiplier</div>
            <div class="tab" data-tab="special">Special</div>
        </div>
        <div class="main">
            <div class="header">Bean Clicker</div>
            <div class="score" id="score">Money: 0</div>
            <div class="per-box" style="display:flex;gap:16px;align-items:center;justify-content:center;margin-bottom:10px;">
                <div class="per-click" id="perClick" style="font-size:1em;color:#3e2723;background:#fffbe6;border-radius:8px;padding:6px 16px;box-shadow:0 1px 4px rgba(0,0,0,0.06);border:1px solid #e6d3b3;"></div>
                <div class="per-second" id="perSecond" style="font-size:1em;color:#3e2723;background:#fffbe6;border-radius:8px;padding:6px 16px;box-shadow:0 1px 4px rgba(0,0,0,0.06);border:1px solid #e6d3b3;"></div>
            </div>
            <div class="bean" id="bean"></div>
            <div id="upgrades"></div>
            <div style="margin-bottom: 30px;">
                <button class="upgrade" id="prestige">Prestige (Cost: 5000)</button>
                <button class="upgrade" id="resetGame">Reset Game</button>
            </div>
        </div>
    </div>
    <script>
    let beans = 0;
    let beansPerClick = 1;
    let beansPerClickMultiplier = 1;
    let autoClickers = 0;
    let autoClickerSpeed = 1000;
    const scoreEl = document.getElementById('score');
    const beanEl = document.getElementById('bean');
    const upgradesDiv = document.getElementById('upgrades');
    const prestigeBtn = document.getElementById('prestige');
    const resetGameBtn = document.getElementById('resetGame');
    let upgrades = [
        // Auto upgrades
    { name: "Auto Clicker", baseCost: 50, cost: 50, effect: () => { autoClickers += 0.25; }, desc: "+0.25 Auto Clicker", max: Infinity, scale: 1, tab: "auto" },
    { name: "Faster Auto Clicker", baseCost: 200, cost: 200, effect: () => { autoClickerSpeed = Math.max(250, autoClickerSpeed - 6.25); }, desc: "Auto Clickers click faster", max: Infinity, scale: 1, tab: "auto" },
    { name: "Bean Factory", baseCost: 1000, cost: 1000, effect: () => { autoClickers += 1.25; }, desc: "+1.25 Auto Clickers", max: Infinity, scale: 1, tab: "auto" },
    { name: "Bean Machine", baseCost: 5000, cost: 5000, effect: () => { autoClickers += 5; }, desc: "+5 Auto Clickers", max: Infinity, scale: 1, tab: "auto" },
    { name: "Bean Accelerator", baseCost: 2500, cost: 2500, effect: () => { autoClickerSpeed = Math.max(50, autoClickerSpeed - 6.25); }, desc: "Auto Clickers click even faster", max: Infinity, scale: 1, tab: "auto" },
    { name: "Bean Overdrive", baseCost: 20000, cost: 20000, effect: () => { autoClickers += 25; }, desc: "+25 Auto Clickers", max: Infinity, scale: 1, tab: "auto" },
    { name: "Bean Finality", baseCost: 100000, cost: 100000, effect: () => { autoClickers += 250; }, desc: "+250 Auto Clickers", max: Infinity, scale: 1, tab: "auto" },

        // Click upgrades
    { name: "Bean Magnet", baseCost: 100, cost: 100, effect: () => { beansPerClick += 0.5; }, desc: "+0.5 money/click", max: Infinity, scale: 1, tab: "click" },
    { name: "Bean Tycoon", baseCost: 500, cost: 500, effect: () => { beansPerClick += 2.5; }, desc: "+2.5 money/click", max: Infinity, scale: 1, tab: "click" },
    { name: "Bean Empire", baseCost: 2500, cost: 2500, effect: () => { beansPerClick += 25; }, desc: "+25 money/click", max: Infinity, scale: 1, tab: "click" },
    { name: "Bean God", baseCost: 15000, cost: 15000, effect: () => { beansPerClick += 250; }, desc: "+250 money/click", max: Infinity, scale: 1, tab: "click" },
    { name: "Bean Infinity", baseCost: 100000, cost: 100000, effect: () => { beansPerClick += 2500; }, desc: "+2,500 money/click", max: Infinity, scale: 1, tab: "click" },
    { name: "Bean Master", baseCost: 500000, cost: 500000, effect: () => { beansPerClick += 25000; }, desc: "+25,000 money/click", max: Infinity, scale: 1, tab: "click" },
    { name: "Bean Eternity", baseCost: 2500000, cost: 2500000, effect: () => { beansPerClick += 250000; }, desc: "+250,000 money/click", max: Infinity, scale: 1, tab: "click" },



        // Multiplier upgrades
    { name: "Bean Multiplier", baseCost: 200, cost: 200, effect: () => { beansPerClickMultiplier += 0.25; }, desc: "+0.25 click multiplier", max: Infinity, scale: 1, tab: "multiplier" },
    { name: "Bean Research", baseCost: 1000, cost: 1000, effect: () => { beansPerClickMultiplier += 0.5; }, desc: "+0.5 click multiplier", max: Infinity, scale: 1, tab: "multiplier" },
    { name: "Bean Portal", baseCost: 5000, cost: 5000, effect: () => { beansPerClickMultiplier += 1.25; }, desc: "+1.25 click multiplier", max: Infinity, scale: 1, tab: "multiplier" },
    { name: "Bean Ascension", baseCost: 25000, cost: 25000, effect: () => { beansPerClickMultiplier += 2.5; }, desc: "+2.5 click multiplier", max: Infinity, scale: 1, tab: "multiplier" },
    { name: "Bean Myth", baseCost: 120000, cost: 120000, effect: () => { beansPerClickMultiplier += 6.25; }, desc: "+6.25 click multiplier", max: Infinity, scale: 1, tab: "multiplier" },
    { name: "Bean Cosmic", baseCost: 600000, cost: 600000, effect: () => { beansPerClickMultiplier += 12.5; }, desc: "+12.5 click multiplier", max: Infinity, scale: 1, tab: "multiplier" },

        // Special upgrades
    { name: "Bean Time", baseCost: 1000, cost: 1000, effect: () => { autoClickerSpeed = Math.max(10, autoClickerSpeed - 6.25); }, desc: "Auto Clickers click ultra fast", max: Infinity, scale: 1, tab: "special" },
    { name: "Bean Singularity", baseCost: 5000, cost: 5000, effect: () => { beans += 2500; }, desc: "Instant 2,500 money", max: Infinity, scale: 1, tab: "special" },
    { name: "Bean Reality", baseCost: 25000, cost: 25000, effect: () => { autoClickerSpeed = Math.max(1, autoClickerSpeed - 6.25); }, desc: "Auto Clickers click instantly", max: Infinity, scale: 1, tab: "special" },
    { name: "Bean Master", baseCost: 120000, cost: 120000, effect: () => { beansPerClick += 25000; }, desc: "+25,000 money/click", max: Infinity, scale: 1, tab: "special" },
    ];
    let upgradeCounts = Array(upgrades.length).fill(0);
    let autoClickerInterval = null;

    function updateScore() {
        scoreEl.textContent = `Money: ${beans}`;
        // Calculate money per second from autoClickers
        const perSecond = autoClickers * beansPerClick * beansPerClickMultiplier;
        document.getElementById('perSecond').textContent = `Per second: ${perSecond}`;
        // Calculate money per click
        const perClick = beansPerClick * beansPerClickMultiplier;
        document.getElementById('perClick').textContent = `Per click: ${perClick}`;
    // ...existing code...

document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', function() {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        activeTab = tab.getAttribute('data-tab');
        updateUpgrades();
    });
});
document.querySelector('.tab[data-tab="auto"]').classList.add('active');
// Show the first upgrade for the default tab on page load
updateUpgrades();
    function updateUpgrades() {
        upgradesDiv.innerHTML = "";
        // Get all upgrades for the current tab
        const tabUpgrades = upgrades
            .map((upg, i) => ({...upg, idx: i}))
            .filter(upg => upg.tab === activeTab);
        // Show all upgrades for the current tab as soon as you have enough money for them
        // Only show the first available upgrade, then unlock the next when you get one
        for (let j = 0; j < tabUpgrades.length; j++) {
            const upg = tabUpgrades[j];
            const i = upg.idx;
            // Only show if it's the first, or the previous has at least one purchased
            if (j === 0 || upgradeCounts[tabUpgrades[j-1].idx] > 0) {
                const btn = document.createElement("button");
                btn.className = "upgrade";
                btn.id = `upgrade${i}`;
                btn.textContent = `${upg.name} (${upg.desc}) [${upgradeCounts[i]}] - Cost: ${Math.floor(upg.cost)}`;
                // Set enabled/disabled state
                if (beans < upg.cost) {
                    btn.disabled = false;
                    btn.classList.add('not-enough');
                } else {
                    btn.disabled = false;
                    btn.classList.remove('not-enough');
                }
                btn.onclick = () => {
                    if (beans < upg.cost) {
                        alert('Not enough money!');
                        return;
                    }
                    beans -= upg.cost;
                    upg.effect(upgradeCounts[i]);
                    upgradeCounts[i]++;
                    updateScore();
                    updateUpgrades();
                    restartAutoClicker();
                };
                upgradesDiv.appendChild(btn);
                // Only show the first available upgrade, then break
                break;
            } else {
                break;
            }
        }
    }
    }

    let activeTab = "auto";
    document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', function() {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            activeTab = tab.getAttribute('data-tab');
            updateUpgrades();
        });
    });
    document.querySelector('.tab[data-tab="auto"]').classList.add('active');

    beanEl.addEventListener('click', (e) => {
        beans += beansPerClick * beansPerClickMultiplier;
        updateScore();
        updateUpgrades();
        beanEl.classList.remove('bounce');
        // Force reflow to restart animation
        void beanEl.offsetWidth;
        beanEl.classList.add('bounce');

        // Create a small bean clone and animate it falling
        const rect = beanEl.getBoundingClientRect();
        const clone = document.createElement('div');
        clone.className = 'bean-clone';
        // Position relative to viewport, then adjust for scroll and container
        clone.style.left = (rect.left + rect.width/2 - 20 + window.scrollX) + 'px';
        clone.style.top = (rect.top + rect.height/2 - 20 + window.scrollY) + 'px';
        document.body.appendChild(clone);
        clone.addEventListener('animationend', () => {
            clone.remove();
        });
    });
    beanEl.addEventListener('animationend', () => {
        beanEl.classList.remove('bounce');
    });

    // Also update upgrades whenever money changes, e.g. after buying, prestige, reset, etc.
    // (Already called in those places, but ensure it's always up to date)

    function restartAutoClicker() {
        if (autoClickerInterval) clearInterval(autoClickerInterval);
        if (autoClickers > 0) {
            autoClickerInterval = setInterval(() => {
                beans += autoClickers * beansPerClick * beansPerClickMultiplier;
                updateScore();
                updateUpgrades();
            }, autoClickerSpeed);
        }
    }

    prestigeBtn.addEventListener('click', () => {
        if (beans >= 500000) {
            beans = 0;
            beansPerClickMultiplier++;
            beansPerClick = 1;
            autoClickers = 0;
            autoClickerSpeed = 1000;
            upgradeCounts = Array(upgrades.length).fill(0);
            restartAutoClicker();
            prestigeBtn.textContent = `Prestige (Cost: 500,000) [x${beansPerClickMultiplier}]`;
            updateScore();
            updateUpgrades();
        }
    });

    resetGameBtn.addEventListener('click', () => {
        beans = 0;
        beansPerClick = 1;
        beansPerClickMultiplier = 1;
        autoClickers = 0;
        autoClickerSpeed = 1000;
        upgradeCounts = Array(upgrades.length).fill(0);
        restartAutoClicker();
        prestigeBtn.textContent = `Prestige (Cost: 500,000)`;
        updateScore();
        updateUpgrades();
    });

    updateScore();
    updateUpgrades();
    </script>
</body>
</html>